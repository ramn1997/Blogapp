<div class="auth-page">
    <div class="auth-card">
        <!-- Header -->
        <div class="auth-header">
            <a routerLink="/" class="auth-brand">
                <span class="brand-icon">‚ú¶</span> ThoughtStream
            </a>
            <h1 class="auth-title">Welcome back</h1>
            <p class="auth-subtitle">Sign in to continue writing and reading</p>
        </div>

        <!-- Error alert -->
        <div class="alert alert-error" *ngIf="error">{{ error }}</div>

        <!-- OAuth buttons -->
        <div class="oauth-section">
            <!-- Rendered by Google GSI SDK -->
            <div id="google-btn" class="google-btn-wrapper"></div>

            <button class="btn btn-microsoft w-full" (click)="signInWithMicrosoft()">
                <svg width="18" height="18" viewBox="0 0 21 21" fill="none">
                    <rect x="1" y="1" width="9" height="9" fill="#f25022" />
                    <rect x="11" y="1" width="9" height="9" fill="#7fba00" />
                    <rect x="1" y="11" width="9" height="9" fill="#00a4ef" />
                    <rect x="11" y="11" width="9" height="9" fill="#ffb900" />
                </svg>
                Continue with Microsoft
            </button>
        </div>

        <!-- Divider -->
        <div class="divider">or sign in with email</div>

        <!-- Form -->
        <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label class="form-label" for="email">Email address</label>
                <input id="email" type="email" formControlName="email" class="form-control"
                    [class.is-invalid]="f['email'].touched && f['email'].invalid" placeholder="you@example.com"
                    autocomplete="email">
                <div class="field-error" *ngIf="f['email'].touched && f['email'].errors?.['required']">Email is required
                </div>
                <div class="field-error" *ngIf="f['email'].touched && f['email'].errors?.['email']">Enter a valid email
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="password">Password</label>
                <div class="input-with-icon">
                    <input id="password" [type]="showPassword ? 'text' : 'password'" formControlName="password"
                        class="form-control" [class.is-invalid]="f['password'].touched && f['password'].invalid"
                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
                    <button type="button" class="icon-btn" (click)="showPassword = !showPassword" tabindex="-1">
                        {{ showPassword ? 'üôà' : 'üëÅ' }}
                    </button>
                </div>
                <div class="field-error" *ngIf="f['password'].touched && f['password'].errors?.['required']">Password is
                    required</div>
            </div>

            <button class="btn btn-primary w-full" type="submit" [disabled]="loading" style="margin-top:8px">
                <span class="spinner" *ngIf="loading"></span>
                {{ loading ? 'Signing in‚Ä¶' : 'Sign in' }}
            </button>
        </form>

        <!-- Footer links -->
        <p class="auth-footer">
            Don't have an account? <a routerLink="/auth/register">Create one</a>
        </p>
    </div>
</div>